<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/monokai.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/dracula.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/nord.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/solarized.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/eclipse.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/idea.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/ambiance.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="app-header">
        <div class="header-content">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <circle cx="20" cy="20" r="18" fill="url(#gradient1)"/>
                    <path d="M20 8L28 16L20 24L12 16L20 8Z" fill="white" opacity="0.9"/>
                    <path d="M20 16L28 24L20 32L12 24L20 16Z" fill="white" opacity="0.6"/>
                    <defs>
                        <linearGradient id="gradient1" x1="0" y1="0" x2="40" y2="40">
                            <stop offset="0%" stop-color="#56ab2f"/>
                            <stop offset="100%" stop-color="#a8e063"/>
                        </linearGradient>
                    </defs>
                </svg>
                <div class="title-group">
                    <h1>Mermaid Editor</h1>
                    <p class="subtitle">Create beautiful diagrams with ease</p>
                </div>
            </div>
            <a href="https://mermaid.js.org/syntax/flowchart.html" target="_blank" class="help-link">
                <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                </svg>
                <span>Help</span>
            </a>
        </div>
    </header>

    <div class="container split-container">
        <div id="editor-pane" class="split">
            <div class="editor-container">
                <div class="editor-header">
                    <label for="mermaid-input">Code:</label>
                    <div class="header-controls">
                        <select id="theme-selector">
                            <option value="material-darker">Material Darker</option>
                            <option value="monokai">Monokai</option>
                            <option value="dracula">Dracula</option>
                            <option value="nord">Nord</option>
                            <option value="solarized dark">Solarized Dark</option>
                            <option value="solarized light">Solarized Light</option>
                            <option value="eclipse">Eclipse</option>
                            <option value="idea">IntelliJ IDEA</option>
                            <option value="ambiance">Ambiance</option>
                        </select>
                        <select id="sample-selector">
                            <option value="" disabled selected>Insert Sample...</option>
                        <option value="flowchart">Flowchart</option>
                        <option value="sequence">Sequence Diagram</option>
                        <option value="class">Class Diagram</option>
                        <option value="state">State Diagram</option>
                        <option value="er">Entity Relationship Diagram</option>
                        <option value="journey">User Journey</option>
                        <option value="gantt">Gantt</option>
                        <option value="pie">Pie Chart</option>
                        <option value="quadrant">Quadrant Chart</option>
                        <option value="requirement">Requirement Diagram</option>
                        <option value="git">GitGraph</option>
                        <option value="c4">C4 Diagram</option>
                        <option value="mindmap">Mindmaps</option>
                        <option value="timeline">Timeline</option>
                        <option value="sankey">Sankey</option>
                        <option value="xy">XY Chart</option>
                        <option value="block">Block Diagram</option>
                        <option value="packet">Packet</option>
                        <option value="kanban">Kanban</option>
                        <option value="architecture">Architecture</option>
                        <option value="radar">Radar</option>
                        <option value="treemap">Treemap</option>
                    </select>
                    </div>
                </div>
                <div class="editor-wrapper">
                    <textarea id="mermaid-input" style="display:none;">
---
title: Hello Sequence
---
sequenceDiagram
    participant Alice
    participant Bob
    Alice->>John: Hello John, how are you?
    loop Healthcheck
        John->>John: Fight against hypochondria
    end
    Note right of John: Rational thoughts<br/>prevail...
    John-->>Alice: Great!
    John->>Bob: How about you?
    Bob-->>John: Jolly good!
</textarea>
                </div>
                <div class="toolbar">
                    <div class="toolbar-group">
                        <button id="copy-url-btn" class="btn btn-success" title="Share this diagram">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>
                            </svg>
                            <span>Share</span>
                        </button>
                    </div>
                    <div class="toolbar-group">
                        <button id="save-txt-btn" class="btn btn-secondary" title="Save diagram as text file">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>
                            </svg>
                            <span>Save</span>
                        </button>
                        <button id="load-txt-btn" class="btn btn-secondary" title="Load diagram from text file">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
                            </svg>
                            <span>Load</span>
                        </button>
                        <input type="file" id="load-txt-input" accept=".txt,.mmd" style="display: none;">
                    </div>
                    <div class="toolbar-group">
                        <button id="download-png-btn" class="btn btn-info" title="Export as PNG image">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M.002 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-12a2 2 0 0 1-2-2V3zm1 9v1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12zm5-6.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"/>
                            </svg>
                            <span>PNG</span>
                        </button>
                        <button id="download-jpg-btn" class="btn btn-warning" title="Export as JPG image">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M.002 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-12a2 2 0 0 1-2-2V3zm1 9v1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12zm5-6.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"/>
                            </svg>
                            <span>JPG</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div id="diagram-pane" class="split">
            <div class="diagram-container">
                <div class="diagram-header">
                    <button id="toggle-background-btn" class="btn btn-secondary" title="Toggle background pattern">
                        <span>Grid</span>
                    </button>
                </div>
                <div id="mermaid-diagram"></div>
            </div>
        </div>
    </div>

    <div id="mermaid-temp" style="display: none; position: absolute; left: -9999px;"></div>
    <div id="toast-notification"></div>

    <script src="https://unpkg.com/split.js/dist/split.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/selection/active-line.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/yaml/yaml.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
